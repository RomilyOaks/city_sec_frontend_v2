{
  "permissions": {
    "allow": [
      "Bash(git add:*)",
      "Bash(npm run build:*)",
      "Bash(npm install)",
      "Bash(npm uninstall:*)",
      "Bash(npm install:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(npm run dev:*)",
      "Bash(find:*)",
      "Bash(npx eslint:*)",
      "Bash(timeout 10 npm run dev:*)",
      "Bash(cat:*)",
      "Bash(awk:*)",
      "Bash(node -e:*)",
      "Bash(timeout 15 npm run dev)",
      "Bash(npx kill-port:*)",
      "Bash(python3:*)",
      "Bash(1)",
      "Bash(test:*)",
      "Bash(npm run lint:*)",
      "Bash(Esc = Cancelar\" en modo formulario\n- Funcionalidad DELETE con confirmación\n- Manejo de estados: loading, empty state, error handling\n\n#### 2. Formulario de Asignación \\(AsignarVehiculoForm\\)\n- **Ubicación**: src/pages/operativos/vehiculos/AsignarVehiculoForm.jsx\n- Campos implementados:\n  * Vehículo * \\(requerido, filtrado inteligente\\)\n  * Conductor \\(opcional, alfabético, sin duplicados\\)\n  * Copiloto \\(opcional\\)\n  * Tipo Copiloto \\(opcional\\)\n  * Radio TETRA \\(opcional\\)\n  * Estado Operativo * \\(default: OPERATIVO ACTIVO\\)\n  * Kilometraje Inicio * \\(requerido\\)\n  * Hora Inicio * \\(pre-llenado con hora actual\\)\n  * Nivel Combustible Inicio \\(LLENO por defecto\\)\n  * Observaciones \\(opcional\\)\n\n#### 3. Validaciones y Filtros Inteligentes \\(UX Mejorado\\)\n- **Vehículos**: Solo muestra vehículos NO asignados al turno actual\n- **Conductores**: \n  * Solo muestra personal NO asignado como conductor en el turno\n  * Ordenamiento alfabético por nombre completo\n  * Filtrado de personal activo únicamente\n- **Validación de campos opcionales**: No envía strings vacíos al backend\n- **Mensaje de advertencia**: Aviso cuando no hay vehículos/conductores disponibles\n- **Deshabilitación automática**: Botón guardar deshabilitado si no hay recursos\n\n#### 4. Atajos de Teclado\n- **Alt+V**: Abrir formulario de asignación de vehículo \\(desde modal\\)\n- **Alt+G**: Guardar asignación \\(desde formulario\\)\n- **Esc**: Cancelar/cerrar \\(contexto-dependiente\\)\n- **Alt+N**: Bloqueado para evitar conflictos con modal padre\n\n#### 5. Servicios API Creados\n- **operativosVehiculosService.js**: CRUD para vehículos del turno\n  * listVehiculosByTurno\\(turnoId\\)\n  * createVehiculoOperativo\\(turnoId, payload\\)\n  * updateVehiculoOperativo\\(turnoId, id, payload\\)\n  * deleteVehiculoOperativo\\(turnoId, id\\)\n\n- **radiosTetraService.js**: Catálogo de radios TETRA\n  * listRadiosTetraActivos\\(\\) → /radios-tetra/disponibles\n\n- **estadosOperativoService.js**: Estados operativos de recursos\n  * listEstadosOperativosActivos\\(\\) → /estados-operativo-recurso/activos\n\n- **tiposCopilotoService.js**: Tipos de copiloto\n  * listTiposCopilotoActivos\\(\\) → /tipos-copiloto/activos\n\n#### 6. RBAC - Permisos Implementados\n- **operativos_vehiculos_create**: Crear asignación de vehículo\n- **operativos_vehiculos_update**: Editar asignación \\(pendiente Fase 2\\)\n- **operativos_vehiculos_delete**: Eliminar asignación del turno\n- Slugs corregidos con formato de puntos: calles.tipos.via.*, etc.\n\n### Mejoras de Experiencia de Usuario \\(UX\\)\n\n1. **Prevención de errores**: \n   - No permite seleccionar vehículos ya asignados\n   - No permite seleccionar conductores ya asignados\n   - Validación en frontend antes de enviar al backend\n\n2. **Retroalimentación visual**:\n   - Badges contextuales con hotkeys según el estado\n   - Mensajes informativos sobre restricciones\n   - Estados de carga con spinners\n   - Tooltips descriptivos en botones\n\n3. **Accesibilidad sin mouse**:\n   - Navegación completa por teclado\n   - Hotkeys visibles permanentemente\n   - Event capture phase para evitar conflictos\n\n4. **Organización de datos**:\n   - Conductores ordenados alfabéticamente\n   - Campos pre-llenados con valores por defecto\n   - Formato consistente de nombres y documentos\n\n### Integración con Sistema Existente\n\n- Integrado en OperativosTurnoPage con botón Car como primera acción\n- Respeta jerarquía de datos: Turno → Vehículos → Cuadrantes → Novedades\n- Colores tema verde olivo \\(primary\\) consistentes con la aplicación\n- Modo oscuro completamente soportado\n\n### Restricciones del Backend Implementadas\n\n- Conductor único por turno \\(un conductor = un vehículo\\)\n- Validación de kilometraje_fin >= kilometraje_inicio\n- ENUM de combustible: LLENO, 3/4, 1/2, 1/4, RESERVA\n- Campos opcionales correctamente manejados \\(no envía strings vacíos\\)\n- Límite de paginación respetado \\(100 registros máximo\\)\n\n### Documentación\n\n- Archivo: DOCS_FRONTEND_OPERATIVOS_VEHICULOS.md\n- Incluye especificaciones del backend y estructura de datos\n\n### Pendiente para Fases Futuras\n\n- Fase 2: Editar/Actualizar vehículo asignado \\(botón Pencil\\)\n- Fase 2: Ver detalle completo \\(botón Eye\\)\n- Fase 3: Operativos Vehículos Cuadrantes\n- Fase 4: Operativos Vehículos Novedades\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")"
    ]
  }
}
